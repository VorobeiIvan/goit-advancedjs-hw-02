{"version":3,"file":"commonHelpers2.js","sources":["../src/js/02-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst elements = {\n  startBtn: document.querySelector('.js-startBtn'),\n  input: document.querySelector('.js-input'),\n  days: document.querySelector('.js-days'),\n  hours: document.querySelector('.js-hours'),\n  minutes: document.querySelector('.js-minutes'),\n  seconds: document.querySelector('.js-seconds')\n};\n\nelements.startBtn.setAttribute('disabled', 'disabled');\n\nlet selectedDate;\nlet now;\nlet timerInterval;\n\nflatpickr(\"input#datetime-picker\", {\n  enableTime: true,\n  time_24hr: true,\n  dateFormat: \"Y-m-d H:i:S\",\n});\n\nfunction errorAlert() {\n  iziToast.error({\n    title: 'Error',\n    message: 'Please choose a date in the future',\n    position: 'topRight',\n    messageColor: 'white',\n    timeout: 3000,\n    transitionIn: 'flipInX',\n    transitionOut: 'flipOutX',\n  });\n}\n\nfunction displayTimer() {\n  let days = selectedDate.getDate() - now.getDate();\n  let hours = selectedDate.getHours() - now.getHours();\n  let minutes = selectedDate.getMinutes() - now.getMinutes();\n  let seconds = selectedDate.getSeconds() - now.getSeconds();\n\n  if (seconds < 0) {\n    seconds = 60 + seconds;\n    minutes = minutes - 1;\n  }\n  if (minutes < 0) {\n    minutes = 60 + minutes;\n    hours = hours - 1;\n  }\n  if (hours < 0) {\n    hours = 24 + hours;\n    days = days - 1;\n  }\n\n  elements.days.textContent = days < 10 ? \"0\" + days : days;\n  elements.hours.textContent = hours < 10 ? \"0\" + hours : hours;\n  elements.minutes.textContent = minutes < 10 ? \"0\" + minutes : minutes;\n  elements.seconds.textContent = seconds < 10 ? \"0\" + seconds : seconds;\n}\n\nelements.input.addEventListener(\"input\", selectionTime);\n\nfunction selectionTime() {\n  now = new Date();\n  let minTime = now.setMinutes(now.getMinutes() + 1);\n  selectedDate = new Date(elements.input.value);\n\n  if (selectedDate > minTime) {\n    displayTimer();\n    elements.startBtn.removeAttribute('disabled');\n  } else {\n    errorAlert();\n    elements.startBtn.setAttribute('disabled', 'disabled');\n\n    elements.days.textContent = '00';\n    elements.hours.textContent = '00';\n    elements.minutes.textContent = '00';\n    elements.seconds.textContent = '00';\n  }\n}\n\nelements.startBtn.addEventListener('click', startTimer);\n\nfunction startTimer() {\n  if (timerInterval) {\n    clearInterval(timerInterval);\n  }\n\n  timerInterval = setInterval(() => {\n    displayTimer();\n\n    if (\n      elements.days.textContent === \"00\" &&\n      elements.hours.textContent === \"00\" &&\n      elements.minutes.textContent === \"00\" &&\n      elements.seconds.textContent === \"00\"\n    ) {\n      clearInterval(timerInterval);\n    }\n  }, 1000);\n}\n"],"names":["elements","selectedDate","now","timerInterval","flatpickr","errorAlert","iziToast","displayTimer","days","hours","minutes","seconds","selectionTime","minTime","startTimer"],"mappings":"+IAKA,MAAMA,EAAW,CACf,SAAU,SAAS,cAAc,cAAc,EAC/C,MAAO,SAAS,cAAc,WAAW,EACzC,KAAM,SAAS,cAAc,UAAU,EACvC,MAAO,SAAS,cAAc,WAAW,EACzC,QAAS,SAAS,cAAc,aAAa,EAC7C,QAAS,SAAS,cAAc,aAAa,CAC/C,EAEAA,EAAS,SAAS,aAAa,WAAY,UAAU,EAErD,IAAIC,EACAC,EACAC,EAEJC,EAAU,wBAAyB,CACjC,WAAY,GACZ,UAAW,GACX,WAAY,aACd,CAAC,EAED,SAASC,GAAa,CACpBC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,qCACT,SAAU,WACV,aAAc,QACd,QAAS,IACT,aAAc,UACd,cAAe,UACnB,CAAG,CACH,CAEA,SAASC,GAAe,CACtB,IAAIC,EAAOP,EAAa,QAAS,EAAGC,EAAI,QAAO,EAC3CO,EAAQR,EAAa,SAAU,EAAGC,EAAI,SAAQ,EAC9CQ,EAAUT,EAAa,WAAY,EAAGC,EAAI,WAAU,EACpDS,EAAUV,EAAa,WAAY,EAAGC,EAAI,WAAU,EAEpDS,EAAU,IACZA,EAAU,GAAKA,EACfD,EAAUA,EAAU,GAElBA,EAAU,IACZA,EAAU,GAAKA,EACfD,EAAQA,EAAQ,GAEdA,EAAQ,IACVA,EAAQ,GAAKA,EACbD,EAAOA,EAAO,GAGhBR,EAAS,KAAK,YAAcQ,EAAO,GAAK,IAAMA,EAAOA,EACrDR,EAAS,MAAM,YAAcS,EAAQ,GAAK,IAAMA,EAAQA,EACxDT,EAAS,QAAQ,YAAcU,EAAU,GAAK,IAAMA,EAAUA,EAC9DV,EAAS,QAAQ,YAAcW,EAAU,GAAK,IAAMA,EAAUA,CAChE,CAEAX,EAAS,MAAM,iBAAiB,QAASY,CAAa,EAEtD,SAASA,GAAgB,CACvBV,EAAM,IAAI,KACV,IAAIW,EAAUX,EAAI,WAAWA,EAAI,WAAU,EAAK,CAAC,EACjDD,EAAe,IAAI,KAAKD,EAAS,MAAM,KAAK,EAExCC,EAAeY,GACjBN,IACAP,EAAS,SAAS,gBAAgB,UAAU,IAE5CK,IACAL,EAAS,SAAS,aAAa,WAAY,UAAU,EAErDA,EAAS,KAAK,YAAc,KAC5BA,EAAS,MAAM,YAAc,KAC7BA,EAAS,QAAQ,YAAc,KAC/BA,EAAS,QAAQ,YAAc,KAEnC,CAEAA,EAAS,SAAS,iBAAiB,QAASc,CAAU,EAEtD,SAASA,GAAa,CAChBX,GACF,cAAcA,CAAa,EAG7BA,EAAgB,YAAY,IAAM,CAChCI,IAGEP,EAAS,KAAK,cAAgB,MAC9BA,EAAS,MAAM,cAAgB,MAC/BA,EAAS,QAAQ,cAAgB,MACjCA,EAAS,QAAQ,cAAgB,MAEjC,cAAcG,CAAa,CAE9B,EAAE,GAAI,CACT"}